"use strict";(self["webpackChunkweather_vue"]=self["webpackChunkweather_vue"]||[]).push([[581],{581:function(e,t,a){a.r(t),a.d(t,{default:function(){return f}});var s=a(252),n=a(577);const r={class:"container"},i={class:"wrapper"},o=["disabled","onClick"],u=(0,s._)("hr",null,null,-1),d={key:0,class:"no-results"};function l(e,t,a,l,c,g){return(0,s.wg)(),(0,s.iD)("div",r,[(0,s._)("input",{onInput:t[0]||(t[0]=(...e)=>g.search&&g.search(...e)),placeholder:"Начните вводить название места",type:"text"},null,32),((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(c.arrOfLocations,(e=>((0,s.wg)(),(0,s.iD)("ul",{key:e},[(0,s._)("div",i,[(0,s._)("li",null,(0,n.zw)(e.value),1),(0,s._)("button",{disabled:g.isDisabled(e.data.fias_id),onClick:t=>g.addToFavorite(e)},null,8,o)]),u])))),128)),this.query&&!c.arrOfLocations.length?((0,s.wg)(),(0,s.iD)("div",d," Результатов нет ")):(0,s.kq)("",!0)])}var c=a(669),g=a.n(c),h={components:{},data(){return{arrOfLocations:[],query:""}},methods:{async search(e){this.query=e.target.value;const t="7b1d99ed6972e5a7c511659eafc3d2b66b4a8031",a={method:"POST",mode:"cors",headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:"Token "+t}};await g().get(`https://suggestions.dadata.ru/suggestions/api/4_1/rs/suggest/address?query=${this.query}&count=6&language=ru&qc_geo=3`,a).then((e=>this.arrOfLocations=e.data.suggestions.filter((e=>e.data.qc_geo>1&&e.data.geo_lat))))},addToFavorite(e){this.$store.dispatch("set_regions",{coords:`&lat=${e.data.geo_lat}&lon=${e.data.geo_lon}`,name:e.value,id:e.data.fias_id,isMy:!1})},isDisabled(e){return this.getID.includes(e)}},computed:{regions(){return this.$store.getters.regions},getID(){let e=this.regions.map((e=>e.id));return e}}},p=a(744);const _=(0,p.Z)(h,[["render",l]]);var f=_}}]);
//# sourceMappingURL=581.a70c29d8.js.map